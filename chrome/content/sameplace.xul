<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<?xml-stylesheet href="chrome://sameplace/skin/sameplace.css" type="text/css"?>

<!DOCTYPE page>
<page id="sameplace" title="SamePlace"
      xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      onload="init(event);"
      onunload="finish(event);"
      orient="vertical"
      width="640"
      height="480">

  <!-- SCRIPTS -->

  <script type="application/x-javascript" src="chrome://xmpp4moz/content/xmpp.js"/>
  <script type="application/x-javascript" src="sameplace.js"/>

  <!-- COMMANDS -->
  
  <commandset>
    <command id="add-contact" oncommand="requestedAddContact();"
             tooltiptext="Add a contact to your contact list"/>
    <command id="open-conversation" oncommand="requestedOpenConversation();"
             tooltiptext="Open a conversation (single or multi-user)"/>
    <command id="cycle-maximize" oncommand="requestedCycleMaximize();"
             tooltiptext="Maximize each panel in turn"/>
    <command id="cycle-orientation" oncommand="cycleOrientation();"
             tooltiptext="Toggle between horizontal and vertical layout"/>
  </commandset>

  <!-- MENUS -->

  <popupset>
    <popup id="message-menu"/>
  </popupset>

  <vbox flex="1">

    <box flex="1" id="box-main" persist="orient" orient="vertical">
      <!-- CONTACT AREA -->

      <box id="box-auxiliary" persist="orient height" orient="vertical" height="100" flex="1">
        <vbox flex="1">
          <richlistbox id="contact-list" flex="1">
            <richlistitem role="online"/>
            <richlistitem role="away"/>
            <richlistitem role="dnd"/>
            <richlistitem role="offline"/>
          </richlistbox>
        </vbox>
      </box>

      <splitter id="splitter-main" persist="orient" orient="vertical"/>

      <!-- CONVERSATION AREA -->

      <deck flex="4" id="conversations" collapsed="true"/>

      <box hidden="true" id="blueprints">
        <vbox role="conversation" address="" resource="" type="">
          <toolbox>
            <toolbar id="conversation-toolbar" fullscreentoolbar="true">

              <toolbarbutton label="Plugins "
                             type="menu" tooltiptext="Available plugins"
                             accesskey="P"
                             hidden="true">
                <menupopup role="plugins" id="plugins-menu"/>
              </toolbarbutton>

              <toolbarbutton label="Options "
                             type="menu" tooltiptext="Options for this conversation"
                             accesskey="p"
                             hidden="true">
                <menupopup role="options">
                  <menuitem label="Follow URLs" role="follow"
                            checked="false" accesskey="F" type="checkbox"/>
                </menupopup>
              </toolbarbutton>

              <toolbaritem align="center">
                <label role="contact" class="header" style="font-style: italic;"/>
              </toolbaritem>

              <toolbarspring/>

              <toolbarbutton role="close"
                             tooltiptext="Close this conversation"
                             oncommand="requestedCloseConversation(event);"/>

              <toolbarbutton role="attach" accesskey="A"
                             tooltiptext="Make this conversation available as a communication channel to this web page"
                             oncommand="requestedAttachContent(event);"
                             dir="reverse"/>
            </toolbar>
          </toolbox>

            
          <iframe role="chat-output" src="chat.html" flex="5" class="box-inset"
                  context="message-menu"/>

          <splitter/>

          <textbox role="chat-input" class="box-inset" multiline="true" rows="0"
                   onkeypress="pressedKeyInChatInput(event);"
                   onoverflow="growTextBox(this);"/>
        </vbox>

        <richlistitem role="contact"
                      account="" address="" 
                      onclick="selectedContact(this);"
                      ondblclick="doubleClickedContact(this);"
                      orient="vertical">
          <hbox flex="1">
            <image role="status-indicator"/>
            <label role="name"/>
          </hbox>
          <label role="status" style="font-style: italic; font-size: smaller; padding-left: 1em;" crop="end"/> 
        </richlistitem>
      </box>
    </box>

    <toolbox>
      <toolbar fullscreentoolbar="true">
        <toolbarspring/>

        <toolbarbutton command="add-contact"/>

        <toolbarbutton command="open-conversation"/>

        <toolbarbutton command="cycle-orientation"/>

        <toolbarbutton command="cycle-maximize"/>

        <toolbarbutton id="devel-shortcut" oncommand="quickJoin();"
                       label="Quick Join" accesskey="Q" hidden="true"/>
      </toolbar>
    </toolbox>    
  </vbox>
</page>
